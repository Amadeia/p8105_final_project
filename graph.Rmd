---
title: "graph"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
---

```{r setup, include=FALSE}
library(flexdashboard)
```

Column {data-width=350}
-----------------------------------------------------------------------

### Chart A

```{r}
  table_county %>% 
  select(-"dikeman") %>%
  mutate(total = cruz + o_rourke) %>% 
  arrange(desc(total)) %>% 
  top_n(5) %>% 
  gather(key = candidate, value = votes, cruz:o_rourke) %>% 
  ggplot(aes(x = county, y = votes, color = candidate)) +
  geom_point() +
  labs(
    title = "Number of Votes for Beto vs Cruz",
    x = "County",
    y = "Number of Votes"
  ) +
  theme(axis.text.x = element_text(angle = 90))
```

### Chart B

```{r}
tx_searches_population = 
  tx_searches %>% 
  filter(district %in% c("Texas 22nd", "Texas 26th", "Texas 3rd", "Texas 8th", "Texas 31st")) %>%
  select(district, health_care, immigration, medicare, medicaid, september_11_attacks) %>% 
  gather(key = topics, value = searched_freq, health_care:september_11_attacks)
```


Column {data-width=350}
-----------------------------------------------------------------------

### Chart C

```{r}
tx_searches_pvi = 
  tx_searches %>% 
  filter(district %in% c("Texas 9th", "Texas 30th", "Texas 18th", "Texas 33rd", "Texas 13th", "Texas 11th", "Texas 8th", "Texas 4th")) %>%
  select(district, health_care, immigration, medicare, medicaid, september_11_attacks) %>% 
  gather(key = topics, value = searched_freq, health_care:september_11_attacks) %>% 
  mutate(party = ifelse(district %in% c("Texas 9th", "Texas 30th", "Texas 18th", "Texas 33rd"), "Democrats", "Republicans"))
```

### Chart D

```{r}
tx_all = 
  tx_searches %>% 
  select(district, health_care, immigration, medicare, medicaid, september_11_attacks) %>% 
  gather(key = topics, value = searched_freq, health_care:september_11_attacks) 
```